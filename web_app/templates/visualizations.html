{% extends "base.html" %}

{% block title %}Advanced Visualizations{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <h1 class="display-4 fw-bold">
                📊 Advanced Visualizations
            </h1>
            <div class="text-muted">
                <i class="fas fa-chart-area me-2"></i>
                Interactive Data Visualization Suite
            </div>
        </div>
        <p class="lead text-muted">
            다양한 고급 시각화 기법을 통해 데이터의 패턴과 인사이트를 발견할 수 있습니다.
        </p>
        <hr class="mt-3 mb-4">
    </div>
</div>

<!-- Visualization Categories -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    🎨 시각화 카테고리
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                        <button class="btn btn-outline-primary w-100 viz-category-btn" data-category="heatmaps">
                            🔥 히트맵
                        </button>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                        <button class="btn btn-outline-success w-100 viz-category-btn" data-category="distributions">
                            📈 분포 분석
                        </button>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                        <button class="btn btn-outline-info w-100 viz-category-btn" data-category="relationships">
                            🔗 관계 분석
                        </button>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                        <button class="btn btn-outline-warning w-100 viz-category-btn" data-category="hierarchical">
                            🌳 계층 구조
                        </button>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                        <button class="btn btn-outline-danger w-100 viz-category-btn" data-category="3d">
                            🎯 3D 시각화
                        </button>
                    </div>
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                        <button class="btn btn-outline-secondary w-100 viz-category-btn" data-category="advanced">
                            ⚡ 고급 기법
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Heatmaps Section -->
<div class="visualization-section" id="heatmaps-section">
    <div class="row mb-4">
        <div class="col-12">
            <h3 class="fw-bold mb-3">🔥 히트맵 시각화</h3>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🔗 상관관계 히트맵
                    </h5>
                    <small class="text-muted">변수 간 상관관계를 색상으로 표현</small>
                </div>
                <div class="card-body">
                    <div id="correlation-heatmap-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🎯 혼동 행렬 히트맵
                    </h5>
                    <small class="text-muted">분류 모델의 성능을 시각화</small>
                </div>
                <div class="card-body">
                    <div id="confusion-matrix-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        📊 모델 성능 히트맵
                    </h5>
                    <small class="text-muted">모델별 성능 지표 비교</small>
                </div>
                <div class="card-body">
                    <div id="performance-heatmap-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🌡️ 밀도 히트맵
                    </h5>
                    <small class="text-muted">2D 데이터의 밀도 분포</small>
                </div>
                <div class="card-body">
                    <div id="density-heatmap-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Distributions Section -->
<div class="visualization-section" id="distributions-section" style="display: none;">
    <div class="row mb-4">
        <div class="col-12">
            <h3 class="fw-bold mb-3">📈 분포 분석 시각화</h3>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🎻 바이올린 플롯
                    </h5>
                    <small class="text-muted">데이터 분포의 확률밀도 함수</small>
                </div>
                <div class="card-body">
                    <div id="violin-plot-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        📦 박스 플롯
                    </h5>
                    <small class="text-muted">사분위수와 이상치 시각화</small>
                </div>
                <div class="card-body">
                    <div id="box-plot-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🏔️ 릿지라인 플롯
                    </h5>
                    <small class="text-muted">카테고리별 분포 비교</small>
                </div>
                <div class="card-body">
                    <div id="ridgeline-plot-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        📊 특성 분포 히트맵
                    </h5>
                    <small class="text-muted">여러 특성의 분포 패턴</small>
                </div>
                <div class="card-body">
                    <div id="feature-distribution-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Relationships Section -->
<div class="visualization-section" id="relationships-section" style="display: none;">
    <div class="row mb-4">
        <div class="col-12">
            <h3 class="fw-bold mb-3">🔗 관계 분석 시각화</h3>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-8 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🔍 산점도 행렬
                    </h5>
                    <small class="text-muted">다변량 데이터의 관계 분석</small>
                </div>
                <div class="card-body">
                    <div id="scatter-matrix-chart" style="height: 500px;"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        📊 상관관계 요약
                    </h5>
                    <small class="text-muted">주요 상관관계 지표</small>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <div class="bg-light p-3 rounded">
                                <h6 class="fw-bold mb-2">강한 양의 상관관계</h6>
                                <div class="progress mb-2" style="height: 20px;">
                                    <div class="progress-bar bg-success" style="width: 85%">0.85</div>
                                </div>
                                <small class="text-muted">Transaction Amount ↔ Risk Score</small>
                            </div>
                        </div>
                        
                        <div class="col-12 mb-3">
                            <div class="bg-light p-3 rounded">
                                <h6 class="fw-bold mb-2">강한 음의 상관관계</h6>
                                <div class="progress mb-2" style="height: 20px;">
                                    <div class="progress-bar bg-danger" style="width: 72%">-0.72</div>
                                </div>
                                <small class="text-muted">Account Age ↔ Fraud Rate</small>
                            </div>
                        </div>
                        
                        <div class="col-12 mb-3">
                            <div class="bg-light p-3 rounded">
                                <h6 class="fw-bold mb-2">중간 상관관계</h6>
                                <div class="progress mb-2" style="height: 20px;">
                                    <div class="progress-bar bg-warning" style="width: 58%">0.58</div>
                                </div>
                                <small class="text-muted">Balance ↔ Transaction Frequency</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        ∥ 평행 좌표 플롯
                    </h5>
                    <small class="text-muted">다차원 데이터의 패턴 시각화</small>
                </div>
                <div class="card-body">
                    <div id="parallel-coordinates-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Hierarchical Section -->
<div class="visualization-section" id="hierarchical-section" style="display: none;">
    <div class="row mb-4">
        <div class="col-12">
            <h3 class="fw-bold mb-3">🌳 계층 구조 시각화</h3>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        ☀️ 선버스트 차트
                    </h5>
                    <small class="text-muted">계층적 데이터의 방사형 시각화</small>
                </div>
                <div class="card-body">
                    <div id="sunburst-chart" style="height: 450px;"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🗺️ 트리맵 차트
                    </h5>
                    <small class="text-muted">계층적 데이터의 면적 시각화</small>
                </div>
                <div class="card-body">
                    <div id="treemap-chart" style="height: 450px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 3D Section -->
<div class="visualization-section" id="3d-section" style="display: none;">
    <div class="row mb-4">
        <div class="col-12">
            <h3 class="fw-bold mb-3">🎯 3D 시각화</h3>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🌐 3D 산점도
                    </h5>
                    <small class="text-muted">3차원 공간에서의 데이터 관계</small>
                </div>
                <div class="card-body">
                    <div id="3d-scatter-chart" style="height: 600px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Advanced Section -->
<div class="visualization-section" id="advanced-section" style="display: none;">
    <div class="row mb-4">
        <div class="col-12">
            <h3 class="fw-bold mb-3">⚡ 고급 시각화 기법</h3>
        </div>
    </div>
    
    <div class="row mb-4">
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        ⏰ 시계열 히트맵
                    </h5>
                    <small class="text-muted">시간에 따른 패턴 분석</small>
                </div>
                <div class="card-body">
                    <div id="time-series-heatmap-chart" style="height: 400px;"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-3">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        🎨 사용자 정의 시각화
                    </h5>
                    <small class="text-muted">맞춤형 차트 생성 도구</small>
                </div>
                <div class="card-body">
                    <div class="text-center p-4">
                        <i class="fas fa-tools fa-4x text-muted mb-3"></i>
                        <p class="text-muted">사용자 정의 시각화 도구는 향후 업데이트에서 제공될 예정입니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Visualization Controls -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    ⚙️ 시각화 제어판
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-3 col-md-6 mb-3">
                        <label class="form-label">데이터셋 선택</label>
                        <select class="form-select" id="dataset-selector">
                            <option value="fraud">Fraud Detection</option>
                            <option value="sentiment">Sentiment Analysis</option>
                            <option value="attrition">Customer Attrition</option>
                        </select>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <label class="form-label">색상 스키마</label>
                        <select class="form-select" id="color-scheme-selector">
                            <option value="viridis">Viridis</option>
                            <option value="plasma">Plasma</option>
                            <option value="rdbu">Red-Blue</option>
                            <option value="hot">Hot</option>
                            <option value="cool">Cool</option>
                        </select>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <label class="form-label">차트 크기</label>
                        <select class="form-select" id="chart-size-selector">
                            <option value="small">Small (300px)</option>
                            <option value="medium" selected>Medium (400px)</option>
                            <option value="large">Large (500px)</option>
                        </select>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <label class="form-label">애니메이션</label>
                        <div class="form-check form-switch mt-2">
                            <input class="form-check-input" type="checkbox" id="animation-toggle" checked>
                            <label class="form-check-label" for="animation-toggle">
                                활성화
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/visualizations-modular.js') }}"></script>
{% endblock %}